<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#682984"><meta name="generator" content="Hexo 5.4.0"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="apple-touch-icon" sizes="180x180" href="/images/icons/icon-180x180.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/icons/icon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/icons/icon-16x16.png"><link rel="mask-icon" href="/images/icons/icon-pinned-tab.svg" color="#682984"><link rel="manifest" href="/manifest.json"><meta name="google-site-verification" content="EFs9XZuMFGzvOpvRVHI_2bKZs1BmAMxPGmoFxuMu4-o"><meta name="msvalidate.01" content="65AD1E28C0D057CEB3C68FBC0293E55B"><meta name="yandex-verification" content="6672f93d837354fb"><meta name="baidu-site-verification" content="yZEdU1ABcR"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.1/css/all.min.css"><script class="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"gracefullight.dev",root:"/",images:"/images",scheme:"Mist",version:"8.2.2",exturl:!0,sidebar:{position:"right",display:"hide",padding:18,offset:12},copycode:!0,bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!0,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},motion:{enable:!1,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},prism:!1,i18n:{placeholder:"Searching...",empty:"We didn't find any results for the search: ${query}",hits_time:"${hits} results found in ${time} ms",hits:"${hits} results found"},path:"/search.xml",localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1}}</script><meta name="description" content="풀스택 개발자를 꿈꾸며"><meta property="og:type" content="website"><meta property="og:title" content="archives"><meta property="og:url" content="https://gracefullight.dev/archives/page/3/index.html"><meta property="og:site_name" content="Gracefullight"><meta property="og:description" content="풀스택 개발자를 꿈꾸며"><meta property="og:locale" content="ko_KR"><meta property="article:author" content="Gracefullight"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://gracefullight.dev/archives/page/3/"><script class="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1,lang:"ko"}</script><link rel="preconnect" href="https://busuanzi.ibruce.info"><link rel="preconnect" href="https://pagead2.googlesyndication.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><meta name="naver-site-verification" content="a73bfdbae0aa662dfbb30d15a87c1aec78aa9342"><meta name="facebook-domain-verification" content="uelupjqqsm5egzlhy1aev2rfxow5yt"><script async src="https://cdn.jsdelivr.net/npm/pwacompat@latest/pwacompat.min.js"></script><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "Person",
    "name": "Gracefullight",
    "url": "https://gracefullight.dev",
    "logo": "https://gracefullight.dev/images/icons/icon-144x144.png",
    "image": "https://gracefullight.dev/images/profile_dog.png",
    "email": "mailto:gracefullight.dev@gmail.com",
    "jobTitle": "Full Stack Developer",
    "nationality": "Korean",
    "sameAs": [
      "https://github.com/gracefullight",
      "https://www.facebook.com/gracefullight.dev"
    ]
  }</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-3004788392777865",enable_page_level_ads:!0})</script><script>!function(e,t,n,c,o,a,f){e.fbq||(o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],(a=t.createElement(n)).async=!0,a.src="https://connect.facebook.net/en_US/fbevents.js",(f=t.getElementsByTagName(n)[0]).parentNode.insertBefore(a,f))}(window,document,"script"),fbq("init","3488156724570735"),fbq("track","PageView")</script><title>Gracefullight - Web.dev</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-89261637-4"></script><script>if(CONFIG.hostname===location.hostname){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-89261637-4")}</script><noscript><style>body{margin-top:2rem}.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header,.use-motion .sidebar{visibility:visible}.use-motion .footer,.use-motion .header,.use-motion .site-brand-container .toggle{opacity:initial}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line{transform:scaleX(1)}.search-pop-overlay,.sidebar-nav{display:none}.sidebar-panel{display:block}</style></noscript><link rel="alternate" href="/feed.xml" title="Gracefullight" type="application/rss+xml">
</head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">Gracefullight</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Web.dev</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>홈</a></li><li class="menu-item menu-item-profile"><a href="/profile/" rel="section"><i class="fa fa-user fa-fw"></i>프로필</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>태그</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>카테고리</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>검색</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">목차</li><li class="sidebar-nav-overview">흝어보기</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Gracefullight" src="/images/profile_dog.png"><p class="site-author-name" itemprop="name">Gracefullight</p><div class="site-description" itemprop="description">풀스택 개발자를 꿈꾸며</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">77</span> <span class="site-state-item-name">카테고리</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">153</span> <span class="site-state-item-name">태그</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dyYWNlZnVsbGlnaHQ=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;gracefullight"><i class="fab fa-github fa-fw"></i></span> </span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOmdyYWNlZnVsbGlnaHQuZGV2QGdtYWlsLmNvbQ==" title="E-Mail → mailto:gracefullight.dev@gmail.com"><i class="fa fa-envelope fa-fw"></i></span></span></div><script src="https://ads-partners.coupang.com/g.js"></script><script>new PartnersCoupang.G({id:115781})</script></div></div><div class="back-to-top animated" role="button"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class="sidebar-dimmer"></div></header><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner index posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2020/01/01/kubernetes-log-architecture/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2020/01/01/kubernetes-log-architecture/" class="post-title-link" itemprop="url">쿠버네티스 로그 아키텍쳐</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2020-01-01 15:53:58" itemprop="dateCreated datePublished" datetime="2020-01-01T15:53:58+09:00">2020-01-01</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2021-03-07 17:17:22" itemprop="dateModified" datetime="2021-03-07T17:17:22+09:00">2021-03-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/" itemprop="url" rel="index"><span itemprop="name">server</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/docker/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2020/01/01/kubernetes-log-architecture/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/01/01/kubernetes-log-architecture/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="관리-원칙"><a class="markdownIt-Anchor" href="#관리-원칙"></a> 관리 원칙</h1><ul><li>어플리케이션 로그는 모두 stdout 으로 출력해야한다.<ul><li>컨테이너로 운영하는 것을 전제로 한다면 파일 출력 자체가 불필요하다.</li></ul></li><li>Nginx 등의 미들웨어에서는 로그가 stdout 으로 출력되도록 이미지를 빌드한다.</li><li>stdout 으로 출력되는 로그는 모두 JSON 포맷으로 출력해 각 속성을 검색할 수 있게 한다.</li><li>쿠버네티스 환경에서는 <code>fluentd-kubernetes-daemonset</code> 을 포함하는 파드를 <code>DaemonSet</code>을 사용해 각 호스트에 배치한다.</li><li>쿠버네티스 리소스에서는 적절히 레이블을 부여해 로그를 검색할 수 있게 한다.</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2019/12/29/mac-recommended-packages/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/12/29/mac-recommended-packages/" class="post-title-link" itemprop="url">맥 추천 패키지</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2019-12-29 13:57:47" itemprop="dateCreated datePublished" datetime="2019-12-29T13:57:47+09:00">2019-12-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2021-03-07 17:17:22" itemprop="dateModified" datetime="2021-03-07T17:17:22+09:00">2021-03-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/mac/" itemprop="url" rel="index"><span itemprop="name">mac</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2019/12/29/mac-recommended-packages/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/12/29/mac-recommended-packages/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>여러 맥 기기의 환경을 구성하다보니 적어 놓는 게 나을 듯 싶었다.</p><h1 id="brew"><a class="markdownIt-Anchor" href="#brew"></a> brew</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ruby -e <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>&quot;</span></span><br></pre></td></tr></table></figure><h2 id="formulae"><a class="markdownIt-Anchor" href="#formulae"></a> formulae</h2><h3 id="main-formulae"><a class="markdownIt-Anchor" href="#main-formulae"></a> main formulae</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">brew install azure-cli \</span><br><span class="line">  fzf \</span><br><span class="line">  git \</span><br><span class="line">  go \</span><br><span class="line">  kubernetes-cli \</span><br><span class="line">  mas \</span><br><span class="line">  node \</span><br><span class="line">  python \</span><br><span class="line">  stern \</span><br><span class="line">  tree \</span><br><span class="line">  wget</span><br></pre></td></tr></table></figure><ul><li>azure-cli</li><li>fzf</li><li>git</li><li>go</li><li>java</li><li>kubernetes-cli</li><li>mas</li><li>node</li><li>python</li><li>stern</li><li>tree</li><li>wget</li></ul><h3 id="sub-formulae"><a class="markdownIt-Anchor" href="#sub-formulae"></a> sub formulae</h3><blockquote><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZG9ja2VyLWZvci1tYWMvaW5zdGFsbC8=">docker for mac<i class="fa fa-external-link-alt"></i></span></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew tap pivotal/tap</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">brew install anaconda \</span><br><span class="line">  dep \</span><br><span class="line">  helm \</span><br><span class="line">  kubectx \</span><br><span class="line">  springboot \</span><br><span class="line">  thefuck \</span><br><span class="line">  youtube-dl \</span><br><span class="line">  zsh-autosuggestions \</span><br><span class="line">  zsh-syntax-highlighting</span><br></pre></td></tr></table></figure><ul><li>anaconda</li><li>dep</li><li>helm</li><li>kubectx</li><li>springboot</li><li>thefuck</li><li>youtube-dl</li><li>zsh-autosuggestions</li><li>zsh-syntax-highlighting</li></ul><h2 id="cask"><a class="markdownIt-Anchor" href="#cask"></a> cask</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew tap homebrew/cask-fonts</span><br><span class="line">brew tap adoptopenjdk/openjdk</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">brew cask install adguard \</span><br><span class="line">  adoptopenjdk11 \</span><br><span class="line">  bitwarden \</span><br><span class="line">  cheatsheet \</span><br><span class="line">  firefox \</span><br><span class="line">  flutter \</span><br><span class="line">  flux \</span><br><span class="line">  font-cascadia \</span><br><span class="line">  font-hack-nerd-font \</span><br><span class="line">  fork \</span><br><span class="line">  google-chrome \</span><br><span class="line">  haptickey \</span><br><span class="line">  hiddenbar \</span><br><span class="line">  iina \</span><br><span class="line">  iterm2 \</span><br><span class="line">  java \</span><br><span class="line">  jetbrains-toolbox \</span><br><span class="line">  keepingyouawake \</span><br><span class="line">  keka \</span><br><span class="line">  mattermost \</span><br><span class="line">  microsoft-edge \</span><br><span class="line">  pock \</span><br><span class="line">  sequel-pro \</span><br><span class="line">  slack \</span><br><span class="line">  telegram-desktop \</span><br><span class="line">  udeler \</span><br><span class="line">  yt-music</span><br></pre></td></tr></table></figure><ul><li>adguard: 💰</li><li>adoptopenjdk11: 자바</li><li>bitwarden: 비밀번호 관리</li><li>cheatsheet: ⌘ 키를 오래 누르면 해당 프로그램의 모든 단축키를 볼 수 있음</li><li>firefox: 파이어폭스</li><li>flutter: 플러터</li><li>flux: 블루라이트 차단</li><li>font-cascadia: Cascadis Code 폰트</li><li>font-hack-nerd-font: iTerm2 용 터미널 폰트</li><li>fork: 무료 중 최고의 git client</li><li>google-chrome: 크롬</li><li>haptickey: 터치바 반응성 추가</li><li>hiddenbar: 작업표시줄의 프로그램 숨기기</li><li>iina: 깔끔한 인터페이스의 미디어 플레이어</li><li>iterm2: 터미널</li><li>jetbrains-toolbox: jetbrains IDE 버전 관리</li><li>keepingyouawake: 잠자기 모드 제어</li><li>keka: 압축 프로그램</li><li>mattermost: 매터모스트</li><li>microsoft-edge: edge</li><li>pock: 터치바를 Dock으로 만들어줌</li><li>sequel-pro: MySQL GUI client</li><li>slack: 슬랙</li><li>telegram-desktop: 텔레그램</li><li>udeler: udemy 강의 다운로더</li><li>yt-music: 유튜브 뮤직 플레이어</li></ul><h1 id="app-store"><a class="markdownIt-Anchor" href="#app-store"></a> App store</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mas install 497799835 \</span><br><span class="line">  1355679052 \</span><br><span class="line">  869223134 \</span><br><span class="line">  441258766 \</span><br><span class="line">  1295203466 \</span><br><span class="line">  1274495053 \</span><br><span class="line">  1289197285 \</span><br><span class="line">  1471801525 \</span><br><span class="line">  897118787 \</span><br><span class="line">  1176895641 \</span><br><span class="line">  425424353 \</span><br><span class="line">  1475628500</span><br></pre></td></tr></table></figure><ul><li>xcode: <strong>497799835</strong></li><li>dropover: <strong>1355679052</strong> 드래그 후 흔들면 가상폴더로 저장</li><li>kakaotalk: <strong>869223134</strong> 카카오톡</li><li>magnet: 💰 <strong>441258766</strong> 창 크기 전환</li><li>microsoft remote desktop: <strong>1295203466</strong> 윈도우 원격</li><li>microsoft todo: <strong>1274495053</strong> todo 관리</li><li>mindnode: <strong>1289197285</strong> 마인드맵</li><li>polyglot: <strong>1471801525</strong> 사파리 번역기</li><li>shazam: <strong>897118787</strong> 음악 찾기</li><li>spark: <strong>1176895641</strong> 최고의 mail client</li><li>unicorn https: <strong>1475628500</strong> Encrypt DNS query</li></ul><h1 id="개선"><a class="markdownIt-Anchor" href="#개선"></a> 개선</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0hvbWVicmV3L2hvbWVicmV3LWJ1bmRsZQ==">bundle<i class="fa fa-external-link-alt"></i></span> 처리</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2019/12/27/kubernetes-rolling-update/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/12/27/kubernetes-rolling-update/" class="post-title-link" itemprop="url">쿠버네티스 롤링 업데이트와 배포</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2019-12-27 20:43:20" itemprop="dateCreated datePublished" datetime="2019-12-27T20:43:20+09:00">2019-12-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2021-03-07 17:17:22" itemprop="dateModified" datetime="2021-03-07T17:17:22+09:00">2021-03-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/" itemprop="url" rel="index"><span itemprop="name">server</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/docker/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2019/12/27/kubernetes-rolling-update/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/12/27/kubernetes-rolling-update/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="deployment"><a class="markdownIt-Anchor" href="#deployment"></a> Deployment</h1><p>Deployment 의 파드 교체 전략에는 <strong>RollingUpdate</strong> 와 <strong>Recreate</strong> 가 있다.<br>기본 값은 <strong>RollingUpdate</strong> 이며 간단한 설정이 적용된 디플로이먼트는 아래와 같을 것이다.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">test-rolling-update</span></span><br><span class="line">  <span class="attr">label:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">test</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">4</span></span><br><span class="line">  <span class="attr">strategy:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RollingUpdate</span></span><br><span class="line">    <span class="attr">rollingUpdate:</span></span><br><span class="line">      <span class="attr">maxUnavailable:</span> <span class="number">3</span></span><br><span class="line">      <span class="attr">maxSerge:</span> <span class="number">4</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">test</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">test</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">test</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">echo</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><p>여기서 롤링업데이트 속성을 좀 더 자세히 알아보자.</p><h2 id="rollingupdate"><a class="markdownIt-Anchor" href="#rollingupdate"></a> RollingUpdate</h2><h3 id="maxunavailable"><a class="markdownIt-Anchor" href="#maxunavailable"></a> maxUnavailable</h3><ul><li>롤링 업데이트 중 동시에 삭제할 수 있는 파드의 최대 갯수</li><li>기본 값은 replicas의 25% 이다.</li><li><code>replicas: 4</code>의 경우 1개 파드 삭제, <code>replicas: 8</code>의 경우 2개 파드 동시 삭제</li><li>퍼센트 및 직접 지정이 가능하다.</li><li>위의 예시 디플로이먼트에서 롤링업데이트 시작 시 파드 3개가 바로 죽는다.</li><li>이 값을 높게 설정하면 동시에 교체되는 파드가 늘어나므로 롤링 업데이트 시간이 줄어든다.<ul><li>하지만 롤링업데이트 중에 남아 있는 파드에 요청 수가 몰릴 수 있다.</li><li>따라서 <code>1</code>로 설정해 파드를 하나씩 교체하는 것이 안전할 수 있다.</li></ul></li></ul><h3 id="maxsurge"><a class="markdownIt-Anchor" href="#maxsurge"></a> maxSurge</h3><ul><li>롤링 업데이트 중 동시에 생성하는 파드 갯수</li><li>기본 값은 replicas의 25% 이다.</li><li><code>replicas: 4</code>면서 <code>maxSurge: 4</code>면 롤링 업데이트 시작 시 새 버전의 파드가 4개 추가로 생성된다.</li><li>이 값을 높게 설정하면 필요한 파드를 빨리 생성하므로 파드 교체 시간이 단축된다.<ul><li>하지만 필요한 시스템 자원이 급증할 수 있다.</li></ul></li></ul><h2 id="probe"><a class="markdownIt-Anchor" href="#probe"></a> Probe</h2><p>세부 설정은 <span class="exturl" data-url="aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvdGFza3MvY29uZmlndXJlLXBvZC1jb250YWluZXIvY29uZmlndXJlLWxpdmVuZXNzLXJlYWRpbmVzcy1zdGFydHVwLXByb2Jlcy8jY29uZmlndXJlLXByb2Jlcw==">Docs<i class="fa fa-external-link-alt"></i></span>를 참조하자</p><h3 id="livenessprobe"><a class="markdownIt-Anchor" href="#livenessprobe"></a> livenessProbe</h3><ul><li>애플리케이션 헬스 체크 기능</li><li>애플리케이션이 의존하는 컨테이너 안의 파일의 존재여부 확인</li><li>Unhealthy 상태의 경우 파드 재시작</li></ul><h3 id="readinessprobe"><a class="markdownIt-Anchor" href="#readinessprobe"></a> readinessProbe</h3><ul><li>컨테이너 외부에서 HTTP 등의 트래픽을 발생시켜 처리할 수 있는 상태인지 확인</li><li><code>tcpSocket</code>으로 포트 지정도 가능하다.</li></ul><h2 id="응답-중인-파드-교체"><a class="markdownIt-Anchor" href="#응답-중인-파드-교체"></a> 응답 중인 파드 교체</h2><p>응답 중인 파드가 교체되는 경우 <code>SIGTERM</code> 신호를 보내 파드가 삭제되는데,<br><code>Graceful Shutdown</code> 상태로 만들기 위해서 종료 처리가 오래 걸리는 파드엔 <strong>terminationGracePeriodSeconds</strong> 를 설정해주는 것이 좋다.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="comment"># 기본값 30</span></span><br><span class="line">  <span class="attr">terminationGracePeriodSeconds:</span> <span class="number">40</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">maria</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">maria:latest</span></span><br></pre></td></tr></table></figure><p><em>Nginx</em>처럼 <code>SIGTERM</code> 시그널을 받고 바로 종료되는 어플리케이션이 있는 파드라면, 라이플사이클 훅을 활용해 안전하게 종료시키는 것이 중요하다.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">nginx:latest</span></span><br><span class="line">      <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">lifecycle:</span></span><br><span class="line">        <span class="comment"># 파드 종료 전 훅</span></span><br><span class="line">        <span class="attr">preStop:</span></span><br><span class="line">          <span class="attr">exec:</span></span><br><span class="line">            <span class="attr">command:</span> [<span class="string">&#x27;/usr/sbin/nginx&#x27;</span>, <span class="string">&#x27;-s&#x27;</span>, <span class="string">&#x27;quit&#x27;</span>]</span><br></pre></td></tr></table></figure><h2 id="파드-11-교체"><a class="markdownIt-Anchor" href="#파드-11-교체"></a> 파드 1:1 교체</h2><p>그렇다면 <code>replicas: 1</code>인 파드를 1:1 교체 시에는 어떤 전략을 가져가야할까<br>답은 아래와 같다.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">strategy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">RollingUpdate</span></span><br><span class="line">  <span class="attr">rollingUpdate:</span></span><br><span class="line">    <span class="comment"># 롤링 업데이트 시 삭제 되는 파드 수</span></span><br><span class="line">    <span class="attr">maxUnavailable:</span> <span class="number">0</span></span><br><span class="line">    <span class="comment"># 롤링 업데이트 시 새로 생성되는 파드 수</span></span><br><span class="line">    <span class="attr">maxSurge:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>여기에 파드가 트래픽을 받을 수 있는지 <code>readinessProbe</code>를 추가해주면 된다.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">readinessProbe:</span></span><br><span class="line">  <span class="attr">httpGet:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/ping</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">  <span class="attr">initialDelaySeconds:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">periodSeconds:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">successThreshold:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">failureThreshold:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">timeoutSeconds:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><p>5초 후에 5초마다 <code>/ping</code> 을 보내 성공여부를 확인한다.<br>타임아웃은 3초며 3번까지 재시도한다.</p><h2 id="bluegreen"><a class="markdownIt-Anchor" href="#bluegreen"></a> Blue/Green</h2><ul><li>디플로이먼트를 2개 만들고, 서비스의 selector 값을 라벨에 따라 변경하자.</li><li>서비스메시를 연동하면 카나리아 배포 방식도 가능하다.</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2019/12/15/Pythonic-the-basics/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/12/15/Pythonic-the-basics/" class="post-title-link" itemprop="url">Pythonic - 기본기</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2019-12-15 16:52:01" itemprop="dateCreated datePublished" datetime="2019-12-15T16:52:01+09:00">2019-12-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2021-03-07 17:17:22" itemprop="dateModified" datetime="2021-03-07T17:17:22+09:00">2021-03-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2019/12/15/Pythonic-the-basics/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/12/15/Pythonic-the-basics/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="the-basics"><a class="markdownIt-Anchor" href="#the-basics"></a> The Basics</h1><h2 id="types"><a class="markdownIt-Anchor" href="#types"></a> Types</h2><ul><li>아무 것도 없는 타입은 <code>None</code></li><li>주석<ul><li><code>#</code></li><li><code>&quot;&quot;&quot; &quot;&quot;&quot;</code></li></ul></li><li>포매팅<ul><li><code>f’test &#123;변수&#125;'</code></li><li><code>&quot;test &#123;&#125;&quot;.format(변수)</code></li></ul></li><li><code>list</code>, <code>dict</code>, <code>set</code> 등은 <strong>immutable</strong> 하지 않아 <code>copy</code> 메소드를 사용해 복사 필요</li><li>스왑<ul><li>a, b = b, a 로 한 줄로 가능</li></ul></li><li>set<ul><li><code>&#123;&#125;</code> 으로 set 지정가능</li><li>집합연산 가능</li><li><code>set([])</code> 로 배열을 set으로 변환 가능</li></ul></li><li>enum<ul><li>튜플로 지정하면 됨</li><li>튜플은 <strong>freeze</strong> 되어 있다.</li><li><code>('a', 'b', 'c')</code></li></ul></li><li>list<ul><li>merge는 더하기로 가능 <code>[] + []</code></li></ul></li></ul><h2 id="operaters"><a class="markdownIt-Anchor" href="#operaters"></a> Operaters</h2><ul><li>if<ul><li>값 체킹에는 <code>0.0</code> <code>''</code> <code>[]</code> <code>()</code> <code>&#123;&#125;</code> <code>set()</code> 등 모든 빈 값이 <code>false</code> 로 떨어진다.<ul><li>따라서 <s>len(foo) &gt; 0</s> 보다 권장</li></ul></li><li><s>if foo != True</s> 보다 <code>if not foo</code> 를 권장</li><li>dict 키 검증 시에는 <code>if 'key' in d:</code> 를 권장 <s>if ‘key’ in d.keys():</s> 필요없다.</li><li><code>y=None</code> <code>x = 1 if y else 2</code> 면 x=2 라는 문법이 된다.</li></ul></li><li>is 문은 값이 None 인지 확인할 때 권장<ul><li><s>if foo == None</s> 보다 <code>if foo is None</code> 을 권장</li><li><code>if foo is not None</code></li></ul></li><li>while<ul><li><code>while else</code> 구문 가능<br>else 는 while 에 break 가 없을 경우 while 끝나고 실행</li></ul></li><li>for<ul><li><code>for in</code></li><li><code>for in else</code> 구문 가능<br>else는 for 에 break 가 없을 경우 for 끝나고 실행</li><li><code>for _ in range(10)</code> 처럼 underscore 는 index 를 안쓸때 권장</li><li><code>for i, item in enumerate(['a', 'b', 'c'])</code> 처럼 index 넣어줄 수 있음</li><li><code>for day, fruit in zip(days, fruit)</code> 처럼 패킹(zip) 함수 기본 제공</li><li><code>for k, v in d.items()</code> 로 dict 타입 반복 가능</li></ul></li><li>func<ul><li><code>def func():</code> 로 함수선언</li><li><code>def add(a: int, b: int) -&gt; int:</code> 처럼 파라미터 및 리턴 타입 정의 가능<ul><li>compile error 발생 안 함</li><li>보여주기 위한 타입 기능</li></ul></li><li>매개변수를 위치 인수로 넣을 수 있음<ul><li><code>def menu(entree, drink)</code>라면 <code>menu(drink='a', entree='b')</code> 로 호출 가능</li></ul></li><li>list 매개변수는 기본값으로 넣으면 안 됨 <code>def foo(list=[])</code> 면 리스트가 <strong>한 번만</strong> 생성됨 (함수 내부 초기화 필요)</li><li><code>def func(*args)</code> 로 동적매개변수 처리 가능 <strong>튜플로 처리됨</strong></li><li><code>def func(**kargs)</code> 로 넣으면 dict로 전달가능 <code>func(key1='val', key2='val')</code></li><li>두 구문을 같이쓸 수 있지만 <code>*args</code>는 <code>**kargs</code> 보다 <strong>먼저 와야한다.</strong></li><li>함수 내부 <code>&quot;&quot;&quot; &quot;&quot;&quot;</code> doc 주석을 넣으면 <code>help(func.__doc__), help(func)</code> 로 도움말 호출 가능</li><li>클로져로 wrapper 함수를 만들면 <strong>데코레이터</strong>로 바로 적용 가능</li><li><code>func(lists, lambda item: item.value())</code> 람다 처리가능 (value: returnValue)</li></ul></li><li><strong>비추천</strong> <code>dic = &#123;x: y for x, y in (zip(w, f)&#125;</code> 처럼 한 번에 for문 dictionary 선언 가능</li><li>genarator<ul><li>def + yield</li><li><code>gen = (i for i in range(10) if i % 2 == 0)</code> 처럼 한 번에 선언하면 제네레이터가 된다.</li><li><code>tuple(gen)</code> 하면 튜플로 처리된다.</li><li>for 보다 빠를 수 있다.</li></ul></li><li><code>globals()</code>, <code>locals()</code> 로 전역, 로컬변수 확인가능</li><li>excpetion<ul><li><code>try: except IndexError as ex: finally:</code></li><li><code>try: except: else: finally:</code> 가 있다면 try =&gt; else =&gt; finally 로 실행</li><li><code>raise IndexError('test error')</code> 처럼 raise 로 에러 발생 가능</li><li>기본에러는 exception hierarchy 참조</li></ul></li></ul><h2 id="package"><a class="markdownIt-Anchor" href="#package"></a> Package</h2><ul><li><code>__init__.py</code> 가 있어야한다.</li><li><s>import package.utils</s> 또는 <code>from package import utils</code> 해서 <code>utils.func</code> 롤 호출</li><li><code>from package import utils as NamedUtil</code> 처럼 as 문으로 네임스페이스 변경 가능</li><li><strong>비추천</strong> <code>from package.folder import *</code> 로 folder 레벨의 모든 python import 가 가능한데<br><code>folder.__init__.py</code> 에 <code>__all__ = ['py', 'py2']</code> 처럼 선언해줘야한다.</li><li><span class="exturl" data-url="aHR0cDovL3NldHVwLnB5">setup.py<i class="fa fa-external-link-alt"></i></span> 를 만들어 패키지를 배포시킬 수 있다.<ul><li>PyCharm: Tools &gt; Create <span class="exturl" data-url="aHR0cDovL3NldHVwLnB5">setup.py<i class="fa fa-external-link-alt"></i></span> &gt; run <span class="exturl" data-url="aHR0cDovL3NldHVwLnB5">setup.py<i class="fa fa-external-link-alt"></i></span> &gt; sdist 로 출력</li><li>Cli: <code>python setup.py sdist</code></li></ul></li><li>PyPI 에 서드파티 라이브러리를 등록하면 <code>pip install termcolor</code> 처럼 설치 가능</li><li>import 라이브러리 순서는 위에서부터 <strong>표준, pip, 로컬패키지, 로컬파일</strong></li><li><code>if __name__ == '__main__': main()</code> 은 <strong>entrypoint 스크립트</strong>에서 사용되는 패턴이다.</li></ul><h2 id="class"><a class="markdownIt-Anchor" href="#class"></a> Class</h2><ul><li>생성자 <code>__init__(self):</code>, <code>Instance()</code> 로 new 없이 생성</li><li>소멸자 <code>__del__(self):</code>, <code>del instance</code> 로 삭제</li><li>class method 의 첫 인자로는 self를 받아야 this처럼 사용이 가능하다. 두 번째 부터 파라미터를 받을 수 있다.</li></ul><h3 id="protected"><a class="markdownIt-Anchor" href="#protected"></a> protected</h3><ul><li>proteced 변수는 <code>_var</code> 처럼 underscore 하나를 넣는다.</li><li><code>@property</code>, <code>@property_name.setter</code> 데코레이터를 통해 <strong>getter/setter</strong> 처리가 가능하다.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Instance</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._foo</span><br><span class="line"></span><br><span class="line"><span class="meta">    @foo.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">self, bar</span>):</span></span><br><span class="line">        self._foo = bar</span><br><span class="line"></span><br><span class="line">intance = Instance()</span><br><span class="line">instance.foo = bar</span><br></pre></td></tr></table></figure><h3 id="private"><a class="markdownIt-Anchor" href="#private"></a> private</h3><ul><li>private 변수는 <code>self.__foo</code> 로 underscore 두 개를 넣는다.</li><li>인스턴스 밖에서 접근이 불가능하다.</li></ul><h3 id="class-variable"><a class="markdownIt-Anchor" href="#class-variable"></a> class variable</h3><ul><li>클래스 변수는 모든 오브젝트 초기화시에 공유되므로 list, dict… 등을 사용하지 않아야한다.</li><li>상수처럼 쓰는게 좋을 듯</li></ul><h3 id="class-method"><a class="markdownIt-Anchor" href="#class-method"></a> class method</h3><ul><li>class 메소드는 <code>@classmethod</code> 데코레이터로 가능하다.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Instance</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">cls</span>):</span></span><br><span class="line">        <span class="comment"># cls 로 클래스 접근가능</span></span><br><span class="line">        <span class="keyword">return</span> cls.bar</span><br><span class="line"></span><br><span class="line">Instance.foo()</span><br></pre></td></tr></table></figure><h3 id="static-method"><a class="markdownIt-Anchor" href="#static-method"></a> static method</h3><ul><li>static 메소드는 <code>@staticmethod</code> 데코레이터로 정의할 수 있으나 잘 사용되지는 않는다.</li></ul><h3 id="상속"><a class="markdownIt-Anchor" href="#상속"></a> 상속</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span>(<span class="params">Parent</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">super</span>().__init__</span><br></pre></td></tr></table></figure><ul><li>다중상속 하지말자</li><li><code>class Twins(Parent, Parent2)</code> 로 되지만 메소드명이 같을 경우 왼쪽에 선언된 것만 실행된다.</li></ul><h3 id="추상"><a class="markdownIt-Anchor" href="#추상"></a> 추상</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> abc</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span>(<span class="params">metaclass=abc.ABCMeta</span>):</span></span><br><span class="line"><span class="meta">    @abc.abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span>(<span class="params">Parent</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;foo&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="특수-메소드"><a class="markdownIt-Anchor" href="#특수-메소드"></a> 특수 메소드</h3><ul><li>많지만 <code>__str__</code> 이 제일 많이 쓴다. <code>toString()</code> 과 같다.</li><li><code>__len__</code> (len(instance))</li><li><code>__eq__</code> (instance == instance2)</li><li><code>__add__</code> (instance + instance2)</li><li>등등…</li><li>클래스 기본기능을 해치는 개인적인 느낌</li></ul><h1 id="여담"><a class="markdownIt-Anchor" href="#여담"></a> 여담</h1><ul><li>MSA의 시대에 살고 있는 어플리케이션 레이어의 개발자는 어쩔 수 없이 폴리글랏 프로그래머가 되기 마련이다.</li><li>하나의 언어에 능통하면 다른 언어로 넘어가는 데에는 익숙함의 문제지만,<br>그 언어를 제대로 사용하기 위해 가장 중요한 건 스타일 가이드, 린팅과 주기적인 Docs, Release Notes 확인이라고 생각한다.</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2019/12/13/carbon-parse-timestamp/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/12/13/carbon-parse-timestamp/" class="post-title-link" itemprop="url">Carbon 으로 timestamp 파싱하기</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2019-12-14 00:05:56" itemprop="dateCreated datePublished" datetime="2019-12-14T00:05:56+09:00">2019-12-14</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2021-03-07 17:17:22" itemprop="dateModified" datetime="2021-03-07T17:17:22+09:00">2021-03-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/php/" itemprop="url" rel="index"><span itemprop="name">php</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/php/carbon/" itemprop="url" rel="index"><span itemprop="name">carbon</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2019/12/13/carbon-parse-timestamp/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/12/13/carbon-parse-timestamp/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="timestamp"><a class="markdownIt-Anchor" href="#timestamp"></a> Timestamp</h1><p><code>Carbon</code>으로 타임스탬프를 파싱하는 데에는 <code>createFromTimestamp</code> 메소드가 있다.</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Carbon::createFromTimestamp(<span class="number">1576249805</span>)-&gt;format();</span><br></pre></td></tr></table></figure><p>하지만 더 쉽게 <code>parse</code> 메소드를 사용해 파싱할 수도 있다.</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$timestamp</span> = <span class="number">1576249805</span>;</span><br><span class="line">Carbon::parse(<span class="string">&#x27;@&#x27;</span> . <span class="variable">$timestamp</span>)-&gt;format();</span><br></pre></td></tr></table></figure><p>여기서의 <code>@</code>는 오류를 무시하는 기분이 들어서 찾아보았는데 표준이였다.</p><p><strong>Example #2 DateTime::setTimestamp() alternative in PHP 5.2</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ts</span> = <span class="number">1171502725</span>;</span><br><span class="line"><span class="variable">$date</span> = <span class="keyword">new</span> DateTime(<span class="string">&quot;@<span class="subst">$ts</span>&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$date</span>-&gt;format(<span class="string">&#x27;U = Y-m-d H:i:s&#x27;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h1 id="참조"><a class="markdownIt-Anchor" href="#참조"></a> 참조</h1><ul><li>timestamp 는 UTC 기준이며 (1970년부터의 차이) timezone 을 정의할 수 없다.</li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cucGhwLm5ldC9tYW51YWwvZW4vZGF0ZXRpbWUuc2V0dGltZXN0YW1wLnBocA==">php man: datetime.settimestamp<i class="fa fa-external-link-alt"></i></span></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2019/11/26/import-json-with-typescript-ts5071/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/11/26/import-json-with-typescript-ts5071/" class="post-title-link" itemprop="url">타입스크립트에서 json import 방법</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2019-11-26 21:39:39" itemprop="dateCreated datePublished" datetime="2019-11-26T21:39:39+09:00">2019-11-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2021-03-07 17:17:22" itemprop="dateModified" datetime="2021-03-07T17:17:22+09:00">2021-03-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/typescript/" itemprop="url" rel="index"><span itemprop="name">typescript</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2019/11/26/import-json-with-typescript-ts5071/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/11/26/import-json-with-typescript-ts5071/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="ts5071"><a class="markdownIt-Anchor" href="#ts5071"></a> TS5071</h1><p>node 에서 즐겨쓰는 <code>package.json</code> import 방법은 아래와 같다.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> packageJson <span class="keyword">from</span> <span class="string">&#x27;../package.json&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(packageJson.version);</span><br></pre></td></tr></table></figure><p>편안하게 잘 사용되는 로직인데 타입스크립트로 변경시에는 몇 가지 설정을 해줘야한다.<br>설명에 필요없는 설정은 생략했다.</p><figure class="highlight json"><figcaption><span>tsconfig.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>또는 <code>tsc</code> 실행시에 <code>--esModuleInterop</code>, <code>--resolveJsonModule</code> 옵션을 추가해 빌드해줘야한다.</p><h1 id="참조"><a class="markdownIt-Anchor" href="#참조"></a> 참조</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8yNjIyNA==">https://github.com/microsoft/TypeScript/issues/26224<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L3B1bGwvMjY4MjUvZmlsZXM=">https://github.com/microsoft/TypeScript/pull/26825/files<i class="fa fa-external-link-alt"></i></span></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2019/11/26/Vee-validate-installing-all-rules-ts7053/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/11/26/Vee-validate-installing-all-rules-ts7053/" class="post-title-link" itemprop="url">vee-validate3 모든 규칙 추가시 TS7053 오류</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2019-11-26 20:29:46" itemprop="dateCreated datePublished" datetime="2019-11-26T20:29:46+09:00">2019-11-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2021-03-07 17:17:22" itemprop="dateModified" datetime="2021-03-07T17:17:22+09:00">2021-03-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/vue/" itemprop="url" rel="index"><span itemprop="name">vue</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/vue/vee-validate/" itemprop="url" rel="index"><span itemprop="name">vee-validate</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2019/11/26/Vee-validate-installing-all-rules-ts7053/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/11/26/Vee-validate-installing-all-rules-ts7053/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="ts7053"><a class="markdownIt-Anchor" href="#ts7053"></a> TS7053</h1><p>3.0 버전이 되면서 <code>HOC</code> 기반으로 변경되며 <code>rules</code>를 상위 컴포넌트에서 확장하게 되었다.<br>문제는 <code>typescript</code> 기반에서 룰 전체 등록이 <strong>TS(7053)</strong> 에러를 발생시킨다.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ValidationProvider, ValidationObserver, extend &#125; <span class="keyword">from</span> <span class="string">&#x27;vee-validate&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> rules <span class="keyword">from</span> <span class="string">&#x27;vee-validate/dist/rules&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys(rules).forEach(<span class="function">(<span class="params">rule</span>) =&gt;</span> &#123;</span><br><span class="line">  extend(rule, rules[rule]); <span class="comment">// rules[rule] 에서 타입오류 발생</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Element implicitly has an &#x27;any&#x27; type because expression of type &#x27;string&#x27; can&#x27;t be used to index type &#x27;typeof import(&quot;.../node_modules/vee-validate/dist/rules&quot;)&#x27;.</span><br><span class="line">No index signature with a parameter of type &#x27;string&#x27; was found on type &#x27;typeof import(&quot;.../node_modules/vee-validate/dist/rules&quot;)&#x27;.ts(7053)</span><br></pre></td></tr></table></figure><h1 id="원인"><a class="markdownIt-Anchor" href="#원인"></a> 원인</h1><p>import, export 의 모듈명은 string index 로 쳐지지 않아 발생한다.</p><h1 id="해결방법"><a class="markdownIt-Anchor" href="#해결방법"></a> 해결방법</h1><p><code>Object.entries</code>와 <code>for of</code>를 사용해 타입에 안전하게 돌려주면 된다.</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; extend &#125; <span class="keyword">from</span> <span class="string">&#x27;vee-validate&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> rules <span class="keyword">from</span> <span class="string">&#x27;vee-validate/dist/rules&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [rule, validation] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(rules)) &#123;</span><br><span class="line">  extend(rule, &#123;</span><br><span class="line">    ...validation,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="여담"><a class="markdownIt-Anchor" href="#여담"></a> 여담</h1><ul><li>새로운 구문 (async/await, import/export)를 사용해 돌릴 땐 먼저 <code>for of</code>를 사용하는 습관을 들여야겠다.</li><li>머지되어서 다음 사람의 삽질은 없을 듯 하다.</li></ul><h1 id="참조"><a class="markdownIt-Anchor" href="#참조"></a> 참조</h1><ul><li><strong>Merged</strong> <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xvZ2FyZXRtL3ZlZS12YWxpZGF0ZS9wdWxsLzI1MTE=">docs: added Installing All Rules with typescript<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9sb2dhcmV0bS5naXRodWIuaW8vdmVlLXZhbGlkYXRlL2d1aWRlL3J1bGVzLmh0bWwjaW5zdGFsbGluZy1hbGwtcnVsZXM=">vee-validate#installing-all-rules<i class="fa fa-external-link-alt"></i></span></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2019/10/27/Helm-chart%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/10/27/Helm-chart%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83/" class="post-title-link" itemprop="url">Helm chart의 모든 것</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2019-10-27 17:10:13" itemprop="dateCreated datePublished" datetime="2019-10-27T17:10:13+09:00">2019-10-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2021-03-07 17:17:22" itemprop="dateModified" datetime="2021-03-07T17:17:22+09:00">2021-03-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/" itemprop="url" rel="index"><span itemprop="name">server</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/docker/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2019/10/27/Helm-chart%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/10/27/Helm-chart의-모든-것/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="helm"><a class="markdownIt-Anchor" href="#helm"></a> Helm</h1><blockquote><p>Helm is a tool for manaing Kubernetes charts.<br>Charts are packages of pre-configured Kubernetes resources.</p></blockquote><ul><li>헬름은 쿠버네티스 차트를 관리하기 위한 도구</li><li>차트는 사전 구성된 쿠버네티스 리소스의 패키지</li><li>같은 어플레케이션을 여러 환경에 배포시 환경 변수, 도메인 등의 manifest 파일을 차트를 통해 관리</li><li>차트를 중심으로 하는 쿠버네티스 개발 종합 관리 도구</li></ul><h1 id="설치"><a class="markdownIt-Anchor" href="#설치"></a> 설치</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 설치</span></span><br><span class="line">brew install kubernetes-helm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 초기화</span></span><br><span class="line">helm init</span><br><span class="line"></span><br><span class="line"><span class="comment"># tiller 파드 확인</span></span><br><span class="line">kubectl -n kube-system get service,deployment,pod --selector app=helm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 버전 확인</span></span><br><span class="line">helm version</span><br></pre></td></tr></table></figure><h1 id="구성"><a class="markdownIt-Anchor" href="#구성"></a> 구성</h1><ul><li>cli와 쿠버네티스 클러스터에 설치되는 서버인 tiller(틸러)로 구성</li></ul><h2 id="chart"><a class="markdownIt-Anchor" href="#chart"></a> chart</h2><ul><li>쿠버네티스는 service, deployment, ingress 등 리소스를 생성하고 manifest 파일을 적용하는 방식으로 어플리케이션을 배포한다. 이 manifest 파일을 생성하는 템플릿을 여러 개 패키징한 것</li><li>helm repository 에 tgz 파일로 저장</li></ul><h3 id="chart-구성"><a class="markdownIt-Anchor" href="#chart-구성"></a> chart 구성</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">chart-example</span><br><span class="line">├── charts <span class="comment"># 차트가 의존하는 차트 디렉토리</span></span><br><span class="line">├── templates <span class="comment"># manifest 파일 템플릿 디렉토리</span></span><br><span class="line">│   ├── NOTES.txt <span class="comment"># 차트 사용법 등 참조 문서 템플릿</span></span><br><span class="line">│   ├── _helper.tpl <span class="comment"># manifest 렌더링에 사용되는 템플릿 헬퍼</span></span><br><span class="line">│   └── example.yaml <span class="comment"># 각종 K8S 리소스의 manifest 템플릿</span></span><br><span class="line">├── Chart.yaml <span class="comment"># 차트 정보가 정의 파일</span></span><br><span class="line">└── values.yaml <span class="comment"># 차트 기본값 value 파일</span></span><br></pre></td></tr></table></figure><p>차트 설치시 <code>values.yaml</code> 에 override 할 값을 정의한 <code>yaml</code> 파일을 만들면 된다.</p><h2 id="repository"><a class="markdownIt-Anchor" href="#repository"></a> repository</h2><ul><li>local: 헬름 클라이언트가 설치된 로컬 리포, 로컬에서 생성한 패키지가 존재</li><li>stable: stable charts repo, 기본값이며 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2hlbG0vY2hhcnRzL3RyZWUvbWFzdGVyL3N0YWJsZQ==">helm/charts<i class="fa fa-external-link-alt"></i></span> 차트 사용 가능</li><li>incubator: stable 조건 미달 repo<ul><li><code>helm repo add incubator https://kubernetes-charts-incubator.storage.googleapis.com/</code></li></ul></li><li><code>helm search</code> 로 차트 검색 가능</li></ul><h1 id="명령어"><a class="markdownIt-Anchor" href="#명령어"></a> 명령어</h1><h2 id="init"><a class="markdownIt-Anchor" href="#init"></a> init</h2><p>보통은 <code>helm init</code><br>실서버에서는 <code>helm init --service-account tiller --node-selectors system --history-max 10</code><br>업그레이드는 <code>helm init --upgrade</code></p><ul><li>–service-account: 틸러가 사용할 서비스계정</li><li>–node-selectors: 틸러를 배포할 노드 레이블</li><li>–upgrade: 틸러 업그레이드</li><li>–history-max: 리소스 하나당 유지할 최대 히스토리 수</li></ul><h2 id="create"><a class="markdownIt-Anchor" href="#create"></a> create</h2><p><code>helm create 차트명</code></p><h2 id="package"><a class="markdownIt-Anchor" href="#package"></a> package</h2><p><code>helm package 차트명</code><br>차트를 압축파일로 패키징</p><ul><li>–version: 차트 버전 지정<ul><li>없을 경우 차트의 버전을 따른다.</li></ul></li></ul><h2 id="search"><a class="markdownIt-Anchor" href="#search"></a> search</h2><p><code>helm search 검색어</code></p><ul><li>-r, --regexp: 검색어를 정규표현식으로 사용</li><li>-l, --versions: 버전 목록도 출력</li></ul><h2 id="fetch"><a class="markdownIt-Anchor" href="#fetch"></a> fetch</h2><p><code>helm fetch 차트경로</code></p><ul><li>–version: 특정 버전 지정</li></ul><h2 id="serve"><a class="markdownIt-Anchor" href="#serve"></a> serve</h2><p><code>helm serve</code><br>로컬 레포지토리로 사용할 웹 서버 시작</p><ul><li>–address: 서버가 개방할 주소<ul><li>기본값은 127.0.0.1:8879</li></ul></li><li>–repo-path: 차트 레포지토리가 될 로컬 디렉토리</li></ul><h2 id="install"><a class="markdownIt-Anchor" href="#install"></a> install</h2><p><code>helm install 차트명</code><br>차트로 애플리케이션 설치</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">helm install stable/redis --name my-redis</span><br><span class="line"></span><br><span class="line">helm install stable/redis --version 3.6.0 \</span><br><span class="line">  --name my-redis \</span><br><span class="line">  --namespace gracefullight \</span><br><span class="line">  -f ./my-redis.yaml</span><br></pre></td></tr></table></figure><ul><li>–dry-run</li><li>–name: 릴리즈명</li><li>–namespace: 설치 대상 네임스페이스</li><li>-f, --values: yaml 파일 경로 (다수 가능)</li><li>–version: 차트 버전 지정</li></ul><h2 id="list"><a class="markdownIt-Anchor" href="#list"></a> list</h2><p><code>helm list</code><br><code>helm list --namespace kube-system</code></p><ul><li>–deleted: 삭제된 릴리즈 포함</li><li>–namespace: 해당 네임스페이스만 확인</li></ul><h2 id="get"><a class="markdownIt-Anchor" href="#get"></a> get</h2><p><code>helm get 릴리즈명</code><br>설치된 릴리스 상ㅇ세 정보를 yaml 으로 출력</p><ul><li>–revision: 릴리즈 리비전 확인</li></ul><h2 id="delete"><a class="markdownIt-Anchor" href="#delete"></a> delete</h2><p><code>helm delete 릴리즈명</code></p><ul><li>–purge: 릴리즈 삭제하고 릴리즈명 해제</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2019/10/25/k8s-object-vs-class-object/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/10/25/k8s-object-vs-class-object/" class="post-title-link" itemprop="url">쿠버네티스 오브젝트와 클래스 오브젝트 비교</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2019-10-25 15:49:57" itemprop="dateCreated datePublished" datetime="2019-10-25T15:49:57+09:00">2019-10-25</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2021-03-07 17:17:22" itemprop="dateModified" datetime="2021-03-07T17:17:22+09:00">2021-03-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/" itemprop="url" rel="index"><span itemprop="name">server</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/docker/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2019/10/25/k8s-object-vs-class-object/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/10/25/k8s-object-vs-class-object/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="앞서"><a class="markdownIt-Anchor" href="#앞서"></a> 앞서</h1><p>쿠버네티스를 이해하는 건 어렵다. DevOps 의 전반적인 플로우를 알아야 이 플로우도 이해가 가기 때문이라 생각한다.<br>생소한 용어들도 어렵다. <a href="/2019/06/09/kubernetes%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83/">한 판을 정리</a> 했지만 매번 참조해야되는 듯하다.</p><h1 id="오브젝트-비교"><a class="markdownIt-Anchor" href="#오브젝트-비교"></a> 오브젝트 비교</h1><table><thead><tr><th>개념</th><th>JAVA 클래스</th><th>쿠버네티스 오브젝트</th></tr></thead><tbody><tr><td>캡슐화</td><td>Class</td><td>Container image</td></tr><tr><td>인스턴스</td><td>Object</td><td>Container</td></tr><tr><td>재사용단위</td><td>jar</td><td>Container image</td></tr><tr><td>컴포지션</td><td>Class A Contains Class B</td><td>Sidecar pattern</td></tr><tr><td>상속</td><td>Class A extends Class B</td><td>A container’s from parent image</td></tr><tr><td>배포단위</td><td>jar, war…</td><td>Pod</td></tr><tr><td>빌드 및 런타임 아이솔레이션</td><td>Module, Package, Class</td><td>Namespace, Pod, Container</td></tr><tr><td>초기화</td><td>Consturctor</td><td>Init container</td></tr><tr><td>초기화 후 트리거</td><td>Init method</td><td>postStart</td></tr><tr><td>종료 전 트리거</td><td>Destroy</td><td>preStop</td></tr><tr><td>Cleanup</td><td>finalize(), shutdown hook</td><td><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2t1YmVybmV0ZXMvY29tbXVuaXR5L3B1bGwvNDgz">Defer container<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>비동기, 병렬 실행</td><td>ThreadPoolExecutor, ForkJoinPool</td><td>Job</td></tr><tr><td>스케쥴링</td><td>Timer, ScheduledExecutorService</td><td>CronJob</td></tr><tr><td>백그라운드</td><td>Daemon thread</td><td>DaemonSet</td></tr><tr><td>설정관리</td><td>System.getenv(), Properties</td><td>ConfigMap, Secret</td></tr></tbody></table><h1 id="여담"><a class="markdownIt-Anchor" href="#여담"></a> 여담</h1><ul><li>개념 설정 전에 이 표를 알았더라면 훨씬 이해가 쉬웠을텐데</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2019/08/20/Deploy-Hexo-with-github-actions/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/08/20/Deploy-Hexo-with-github-actions/" class="post-title-link" itemprop="url">Github Actions로 Hexo 배포 자동화하기</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2019-08-20 23:25:15" itemprop="dateCreated datePublished" datetime="2019-08-20T23:25:15+09:00">2019-08-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2021-03-07 17:17:22" itemprop="dateModified" datetime="2021-03-07T17:17:22+09:00">2021-03-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2019/08/20/Deploy-Hexo-with-github-actions/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/08/20/Deploy-Hexo-with-github-actions/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="개념"><a class="markdownIt-Anchor" href="#개념"></a> 개념</h1><p>Docker 이미지로 생성된 후에 그 위에서 돌아간다.<br>자세한 개념은 시간날 때 추가 예정</p><h1 id="레파지토리-토큰-발급"><a class="markdownIt-Anchor" href="#레파지토리-토큰-발급"></a> 레파지토리 토큰 발급</h1><p><span class="exturl" data-url="aHR0cHM6Ly9oZWxwLmdpdGh1Yi5jb20vZW4vZ2l0aHViL2F1dGhlbnRpY2F0aW5nLXRvLWdpdGh1Yi9jcmVhdGluZy1hLXBlcnNvbmFsLWFjY2Vzcy10b2tlbi1mb3ItdGhlLWNvbW1hbmQtbGluZQ==">여기<i class="fa fa-external-link-alt"></i></span>를 참조해 레파지토리의 secret 으로 등록한다.</p><h1 id="서브모듈"><a class="markdownIt-Anchor" href="#서브모듈"></a> 서브모듈</h1><p>themes directory 하위의 테마들은 각각의 repo를 가지고 있다.<br>이 테마들을 CI 중에 가져오기 위해선 서브모듈로 등록해주고 초기화시켜줘야한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 서브모듈 테마 추가</span></span><br><span class="line">git submodule add 테마깃경로 themes/테마명</span><br><span class="line"></span><br><span class="line"><span class="comment"># 싱크</span></span><br><span class="line">git submodule update --init --remote</span><br></pre></td></tr></table></figure><p>여기서 <code>remote</code> 옵션을 쓰지 않을 경우 최신 마스터를 pull 하지 않는다. 서브모듈을 쓰는 이유는 내가 관리하지 않기 위함이니 꼭 추가해주자.</p><h1 id="소스"><a class="markdownIt-Anchor" href="#소스"></a> 소스</h1><p>주석 없어도 하나하나가 무슨 느낌인지는 받아들여질 것 같다.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Node</span> <span class="string">CI</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">node:</span> [<span class="number">12</span>]</span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@master</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SETUP_NODE_$&#123;&#123;</span> <span class="string">matrix.node</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@master</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.node</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">BEFORE_INSTALL</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">i</span> <span class="string">-g</span> <span class="string">hexo</span> <span class="string">workbox-cli</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">BEFORE_SCRIPT</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&#x27;gracefullight&#x27;</span></span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&#x27;gracefullight.dev@gmail.com&#x27;</span></span><br><span class="line">          <span class="string">sed</span> <span class="string">-i</span> <span class="string">&quot;s/__GITHUB_TOKEN__/$<span class="template-variable">&#123;&#123; secrets.HEXO_DEPLOY_TOKEN &#125;&#125;</span>/&quot;</span> <span class="string">_config.yml</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">THEME_INSTALL</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">git</span> <span class="string">submodule</span> <span class="string">update</span> <span class="string">--init</span> <span class="string">--remote</span> <span class="string">--recursive</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">NPM_INSTALL</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">HEXO_CLEAN</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">HEXO_GENERATE</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">WORKBOX_BUILD</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">workbox</span> <span class="string">injectManifest</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">HEXO_DEPLOY</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">hexo</span> <span class="string">deploy</span></span><br></pre></td></tr></table></figure><h2 id="github_token"><a class="markdownIt-Anchor" href="#github_token"></a> GITHUB_TOKEN</h2><p><code>secrets.GITHUB_TOKEN</code> 은 예약된 토큰이다.<br>빌드 이미지에서 현재 repo를 접근하기 위한 토큰임을 알아두자.</p><h1 id="결론"><a class="markdownIt-Anchor" href="#결론"></a> 결론</h1><blockquote><p>travis-ci 안녕</p></blockquote><h1 id="참조"><a class="markdownIt-Anchor" href="#참조"></a> 참조</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly9oZWxwLmdpdGh1Yi5jb20vZW4vYXJ0aWNsZXMvd29ya2Zsb3ctc3ludGF4LWZvci1naXRodWItYWN0aW9ucw==">Workflow syntax<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9oZWxwLmdpdGh1Yi5jb20vZW4vYXJ0aWNsZXMvdmlydHVhbC1lbnZpcm9ubWVudHMtZm9yLWdpdGh1Yi1hY3Rpb25z">Virtual env<i class="fa fa-external-link-alt"></i></span></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><nav class="pagination"><a class="extend prev" rel="prev" href="/archives/page/2/"><i class="fa fa-angle-left" aria-label="이전 페이지"></i></a><a class="page-number" href="/archives/">1</a><a class="page-number" href="/archives/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/archives/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/archives/page/30/">30</a><a class="extend next" rel="next" href="/archives/page/4/"><i class="fa fa-angle-right" aria-label="다음 페이지"></i></a></nav><script>window.addEventListener("tabs:register",()=>{let{activeClass:t}=CONFIG.comments;if(CONFIG.comments.storage&&(t=localStorage.getItem("comments_active")||t),t){const e=document.querySelector(`a[href="#comment-${t}"]`);e&&e.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{if(!t.target.matches(".tabs-comment .tab-content .tab-pane"))return;const e=t.target.classList[1];localStorage.setItem("comments_active",e)})</script></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Gracefullight</span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="Total Visitors"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-pv" title="Total Views"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script>CONFIG.page.isPost&&(wpac_init=window.wpac_init||[],wpac_init.push({widget:"Rating",id:26238,el:"wpac-rating",color:"682984"}),function(){if(!("WIDGETPACK_LOADED"in window)){WIDGETPACK_LOADED=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//embed.widgetpack.com/widget.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t.nextSibling)}}())</script><script src="/js/local-search.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="//cdn.jsdelivr.net/npm/quicklink@2/dist/quicklink.umd.js"></script><script>window.addEventListener("load",()=>{quicklink.listen({timeout:3e3,priority:!0,ignores:[e=>e.includes("#"),e=>"https://gracefullight.dev/archives/page/3/"===e,(e,i)=>i.hasAttribute("noopener")]})})</script><script>function loadCount(){var d=document,t=d.createElement("script");t.src="https://gracefullight.disqus.com/count.js",t.id="dsq-count-scr",(d.head||d.body).appendChild(t)}window.addEventListener("load",loadCount,!1)</script><script src="/a2hs.js"></script><script>AddToHomeScreen({color:"#682984",htmlContent:'Install <strong>Blog</strong> on your iOS device: tap share and <strong>Add to Home Screen <i class="fa fa-plus-square-o" aria-hidden="true"></i>',logoImage:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve">\n    <image id="image0" width="32" height="32" x="0" y="0"\n      xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABwlBMVEUAAABoKYRoKYRoKYRo\nKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRo\nKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRmJ4NlJYJmJoNnKINmJoJnJ4NrLYaCTpmh\nerK3mcTApsy/pMuzk8Gdc69/SpdqLIaHVp7IstPy7PT+/v7////9/f7w6fLFrdB4QJFpKoSgeLHv\n6PLw6vOAS5eacK318Pf9/P7l2+rDqs6yksC0lcLGrtHj1+j8+/3Uw9xtMIh7RJTl2ur39Pm0lMJ3\nPpB0Oo6YbKuvjr79/P2wkL9nKIRoKIRwNIrbzOLf0uVzOY3x6vNsL4d5QZKMW6H59vqherOGVJ3m\n2+rs5O/r4+/p3+2OXqOPYaT6+Pv//v+edrCLWqD49fr8+vyTZqeKWZ+ujL2FU5zh1ed7RZTt5fDU\nwdxrLYeMXKHz7/bRvdn59/qhebKAS5jy7fWccq76+fvx7PSog7hkJIFuMYnHr9Hh1ObBp8yxkL+w\nj77ErM/LtdVwNIvi1ud0O46SZKa5nMangrd1PI9pKoVmJYIBdN/qXMTWAAAAIXRSTlMAAAQoa6zZ\n8v0DNpbf+xqJ6YgZNcL+QdjBAineq/w36OoVlKlsAAAAAWJLR0SVCGB6gwAAAAd0SU1FB+QBDAkd\nFjLeh/4AAAH+SURBVDjLhZPpW1JBFMZnFLkIygU3vALqADO3MosWT6ktltrilhVFRZYaZZRr+25p\nm5Va1h/cwJ0FeHwe3k9zz/ndmTPvnIOQEK6qdtW4DY/HcNe4qqswKhWu9frq6olQfZ3PW1uMYOw3\nA6REgWADxjrf2NRMytTc1CgJjFvcZBe5WxyC/x8iuyrk7IH9rToWiycoZXHb+Wr1cwBbpk7v2buv\na3/3gYPJQ7QQMC2MsFfVTw8fOdoDXMeO9/YViIAXI8sn8/0nToLUqdPOKT4LtYVF3h44A3B2cGj4\n3PkLF0dGnWC4DbmEf/bYOMDEpUnCGLk8cIUKT10oIje4CpC61l/YmbLr8twIEh6kb9wEuJXJ/0ht\nLuUFMsQGydsAXTG+muq7wyVqIAbyOAt2dxpgJk5IYvZe9n72wRxz4h4FPMzBo8ccYPML/JqLSwKI\nyiPY8gTACo8mnjzNpjRgyCLtZ88BXozy6l9mXr3WQEhdc+oNwNt3MX4N9v6DBiLKKLb6EeDTWoay\n9aQGuFHS6vTnL/nivn77vvEjpwButXose/JnSj2WBPhj4fYOSfxa28w5+enN2bxnpKOd94MVVP1g\nb22vdPcO/f4zt/O3EAlauLTlKGOUpGP/GNUtV7lpK7Z95cHJEw1mZ2m+0ywaPTG8YT284bLhLRr/\naLRs/P8DbZGRYkxcNtEAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDEtMTJUMDk6Mjk6MjIrMDM6\nMDA/mynTAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTAxLTEyVDA5OjI5OjIyKzAzOjAwTsaRbwAA\nAABJRU5ErkJggg=="/>\n</svg>\n'})</script></body></html>